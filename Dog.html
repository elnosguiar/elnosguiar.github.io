<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>ê°•ì•„ì§€ ê°•í™” : LV100</title>

<style>
*{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
body{
    margin:0;
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
    background:linear-gradient(180deg,#0b0c1a,#000);
    color:#fff;
}
.app{
    max-width:420px;
    margin:auto;
    min-height:100vh;
    display:flex;
    flex-direction:column;
}
.top{
    padding:14px;
    background:#111;
    text-align:center;
    border-bottom:1px solid #222;
}
.top h1{
    margin:0;
    font-size:20px;
    color:#ffd54f;
}
.name{
    font-size:14px;
    color:#aaa;
}
.main{
    flex:1;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
}
.dog-box{
    width:240px;
    height:240px;
    border-radius:50%;
    background:radial-gradient(circle,#222,#000);
    display:flex;
    justify-content:center;
    align-items:center;
    box-shadow:0 0 40px rgba(255,193,7,.3);
    position:relative;
}
.dog{
    font-size:120px;
}
.flash{
    animation:flash .4s;
}
@keyframes flash{
    0%{box-shadow:0 0 0 rgba(255,215,0,0)}
    50%{box-shadow:0 0 80px rgba(255,215,0,.9)}
    100%{box-shadow:0 0 0 rgba(255,215,0,0)}
}
.shake{
    animation:shake .3s;
}
@keyframes shake{
    0%{transform:translate(0)}
    25%{transform:translate(-6px)}
    50%{transform:translate(6px)}
    75%{transform:translate(-6px)}
    100%{transform:translate(0)}
}
.info{
    margin-top:20px;
    text-align:center;
}
.level{
    font-size:26px;
}
.rate{
    font-size:14px;
    color:#aaa;
}
.bottom{
    padding:14px;
    background:#050505;
    border-top:1px solid #222;
}
button{
    width:100%;
    padding:18px;
    border:none;
    border-radius:14px;
    font-size:20px;
    font-weight:bold;
    background:linear-gradient(135deg,#ffc107,#ff6f00);
    cursor:pointer;
}
button:active{transform:scale(.97)}
button:disabled{
    background:#444;
    color:#888;
}
.log{
    margin-top:10px;
    max-height:120px;
    overflow-y:auto;
    font-size:13px;
}
.success{color:#4caf50}
.fail{color:#f44336}
</style>
</head>

<body>
<div class="app">

    <div class="top">
        <h1>ğŸ¶ ê°•ì•„ì§€ ê°•í™”</h1>
        <div class="name" id="name"></div>
    </div>

    <div class="main">
        <div class="dog-box" id="box">
            <div class="dog" id="dog">ğŸ•</div>
        </div>

        <div class="info">
            <div class="level">LV <span id="lv">0</span></div>
            <div class="rate">ì„±ê³µ í™•ë¥  <span id="rate">90%</span></div>
        </div>
    </div>

    <div class="bottom">
        <button id="btn">ê°•í™”í•˜ê¸°</button>
        <div class="log" id="log"></div>
    </div>

</div>

<script>
const maxLv = 100;
let lv = Number(localStorage.getItem("dog_lv")) || 0;

const dog = document.getElementById("dog");
const lvEl = document.getElementById("lv");
const rateEl = document.getElementById("rate");
const nameEl = document.getElementById("name");
const logEl = document.getElementById("log");
const btn = document.getElementById("btn");
const box = document.getElementById("box");

function getRate(l){
    if(l<10) return 90;
    if(l<30) return 70;
    if(l<50) return 40;
    if(l<70) return 25;
    if(l<90) return 10;
    return 5;
}

function getName(l){
    if(l<10) return "ê¸¸ë°”ë‹¥ ê°•ì•„ì§€";
    if(l<30) return "ë‹¨ë‹¨í•œ ë©ë©ì´";
    if(l<50) return "ì „íˆ¬ê²¬";
    if(l<70) return "ì§€ì˜¥ì˜ ì‚¬ëƒ¥ê²¬";
    if(l<90) return "ê³ ëŒ€ ìˆ˜í˜¸ê²¬";
    return "ğŸ‘‘ ê°œì™•";
}

function getIcon(l){
    if(l<30) return "ğŸ•";
    if(l<60) return "ğŸ•â€ğŸ¦º";
    if(l<90) return "ğŸº";
    return "ğŸ‰";
}

function save(){
    localStorage.setItem("dog_lv", lv);
}

function log(msg,cls){
    const d=document.createElement("div");
    d.textContent=msg;
    d.className=cls;
    logEl.prepend(d);
}

function update(){
    lvEl.textContent=lv;
    rateEl.textContent=getRate(lv)+"%";
    nameEl.textContent=getName(lv);
    dog.textContent=getIcon(lv);
    if(lv>=maxLv) btn.disabled=true;
    save();
}

btn.onclick=()=>{
    if(lv>=maxLv) return;

    const r=getRate(lv);
    const roll=Math.random()*100;

    box.classList.remove("shake","flash");
    void box.offsetWidth;
    box.classList.add("shake");

    if(roll<r){
        lv++;
        box.classList.add("flash");
        log(`âœ… ì„±ê³µ â†’ LV ${lv}`,"success");
    }else{
        if(lv>0){
            lv--;
            log(`âŒ ì‹¤íŒ¨â€¦ LV ${lv}`,"fail");
        }else{
            log("âŒ ì‹¤íŒ¨â€¦ ë³€í™” ì—†ìŒ","fail");
        }
    }
    update();
};

update();
</script>
</body>
</html>
